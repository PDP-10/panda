	TITLE Rita the Receptionist
	SEARCH MACSYM,MONSYM

OLDMOD:	BLOCK 1
OLDCOC:	BLOCK 2

START:	MOVX 1,.CTTRM
	RFMOD%
	MOVEM 2,OLDMOD
	TXZ 2,TT%ECO!TT%ECM!TT%DAM
	SFMOD%
	STPAR%
	RFCOC%
	DMOVEM 2,OLDCOC
	SETZB 2,3
	SFCOC%
	MOVX 1,SIXBIT/EXEC/
	MOVE 2,1
	SETSN%
	 ERJMP .+1
	GJINF%
	CAIE 4,3
	IFSKP.
	  MOVX 1,^D10000
	  DISMS%
	  MOVX 1,.CTTRM
	  CFIBF%
	  MOVX 4,^D1200
	  DO.
	    MOVX 1,.PRIIN
	    SIBE%
	    IFSKP.
	      MOVX 1,100
	      DISMS%
	      SOJGE 4,TOP.
	      HALTF%
	    ENDIF.
	    PBIN%
	    CAIE 1,"."
	     LOOP.
	  ENDDO.
	ENDIF.
	MOVX 1,.CTTRM
	MOVE 2,OLDMOD
	SFMOD%
	STPAR%
	DMOVE 2,OLDCOC
	SFCOC%
	MOVX 1,GJ%SHT!GJ%OLD
	HRROI 2,[ASCIZ/DEFAULT-EXEC:/]
	GTJFN%
	IFJER.
	  HRROI 1,[ASCIZ/No shell
/]
	  ESOUT%
	  HALTF%
	ENDIF.
	HRLI 1,.FHSLF
	DMOVE 5,[GET%
		 MOVEI 1,.FHSLF]
	DMOVE 7,[SETZ 2,
		 SFRKV%]
	JRST 5

	END START
